{"version":3,"sources":["uni-app:///main.js","webpack:///E:/MyJava/LoveNotebook/LoveNotebook_WeChatMini_front/pages/restaurant/restaurant.vue?5d97","webpack:///E:/MyJava/LoveNotebook/LoveNotebook_WeChatMini_front/pages/restaurant/restaurant.vue?6def","webpack:///E:/MyJava/LoveNotebook/LoveNotebook_WeChatMini_front/pages/restaurant/restaurant.vue?802d","webpack:///E:/MyJava/LoveNotebook/LoveNotebook_WeChatMini_front/pages/restaurant/restaurant.vue?f20a","uni-app:///pages/restaurant/restaurant.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","MainHeader","MyTabBar","data","clientHeight","isLove","isRestaurant","rightIdentity","leftIdentity","rightScrollTopTitle","maskShow","maskCheckBossUrl","maskCheckCustomerUrl","contentBottom","cartMaskShow","cartMaskHeight","cartIsAllCheck","cartFoodHeartCount","cartTopSelectAllClass","foodCategoryList","foodCategoryId","foodCategoryName","restaurantId","foodCategoryIsCheck","foodList","restaurant","restaurantName","restaurantGrade","user","cartList","onPullDownRefresh","uni","onLoad","onShow","methods","init","storage","b","getfoodList","that","getfoodCategoryList","console","length","getAllFood","getCartList","checkCartIsALLSelect","flag","cartTopSelectAll","clearAllCart","cartItemClick","cartClick","checkIsLove","checkIsRestaurant","gotoOrder","url","foodCountMinus","foodCountAdd","foodCartCountMinus","foodCartCountAdd","maskCheckBoss","maskCheckCustomer","maskSubmit","icon","title","setRightScrollTopTitle","foodCategoryClick","gotoEditNamePage","foodCategoryManage","addFood","getBarHeight","getcartMaskHeight","getClineHeight","success"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACuC;;;AAGhG;AACgL;AAChL,gBAAgB,uLAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjEA;AAAA;AAAA;AAAA;AAAwqB,CAAgB,sqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC+N5rB;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,EACA;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBACAC;gBACA;cAAA;gBACA;gBACAC;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBACAZ;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA,MAEAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAIA;cAAA;gBAIA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAa;MACA;MACA;MACA;MACA;QACA;UACA;YACAlB;YACA;YAEA;cACA;gBACAmB;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAf;gBACAc;gBAAA;gBAAA,OACA,2GACA;kBACAE;kBACA,gGACAC;oBACAH;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAlB;gBAAA;gBAAA,OACA;kBACAgB;kBACAL;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAQ;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAL;gBAAA;gBAAA,OACA;kBACAE;kBACAF;kBACAA;kBAEAA;kBACAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACAM;MACA;MACA;MACA;QACA;UACAC;QACA;UACAA;UACA;QACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;UACA;YACA;UACA;QACA;QACA;QACA;MACA;MACA;QACA;UACA;YACA;UACA;QACA;QACA;QACA;MACA;IAEA;IACA;IACAC;MACA;MACA;QACAP;QACAF;QACA;UACAA;QACA;QACAA;MACA;IACA;IACA;IACAU;MACA;QACA;QACA;QACAR;QACA;MACA;MACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAS;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAb;gBAAA;gBAAA,OACA;kBACAE;kBACA;oBACAL;oBACAG;oBACA;sBACAA;sBACAA;sBACAA;oBACA;sBACAA;sBACAA;sBACAA;oBACA;oBACAA;kBACA;oBACAA;oBACAA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAc;MACA;QACA;QACA;MACA;MACAjB;MAEAL;QACAuB;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;QACA;UACAd;UACAF;UACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAiB;MAAA;MACA;MACA;MACA;QACAf;QACAF;QACA;MACA;IACA;IACA;IACAkB;MACA;MACA;MACA;QACAhB;QACAF;QACA;UACA;YACAA;UACA;QACA;MACA;IACA;IACA;IACAmB;MACA;MACA;MACA;QACAjB;QACAF;QACA;UACA;YACAA;UACA;QACA;MACA;IACA;IACA;IACAoB;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACApC;QACAA;MACA;QACAA;QAAA;QACAA;MACA;MACAgB;MACA;QACA;UACAF;UACAA;QACA;UACAR;YACA+B;YACAC;UACA;QACA;MACA;IAEA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;UACA;QACA;QACA;QACA;QAEA;UACA;UAEA;QACA;MAEA;IACA;IACA;IACAC;MACA;MACA;QACAnC;UACA+B;UACAC;QACA;QACA;MACA;MACAhC;QACAuB;MACA;IACA;IACA;IACAa;MACA;MACA;QACApC;UACA+B;UACAC;QACA;QACA;MACA;MACA;MACA;QACAhC;UACA+B;UACAC;QACA;QACA;MACA;MACAhC;QACAuB;MACA;IACA;IACA;IACAc;MACA;MACA;QACArC;UACA+B;UACAC;QACA;QACA;MACA;MACA;MACA;QACAhC;UACA+B;UACAC;QACA;QACA;MACA;MACAhC;QACAuB;MACA;IACA;IACA;IACAe;MACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAC;UACAjC;UACAA,6EACA+B;UACA7B;QACA;MACA;IACA;EACA;AACA;AAAA,2B","file":"pages/restaurant/restaurant.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/restaurant/restaurant.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./restaurant.vue?vue&type=template&id=22f78726&scoped=true&\"\nvar renderjs\nimport script from \"./restaurant.vue?vue&type=script&lang=js&\"\nexport * from \"./restaurant.vue?vue&type=script&lang=js&\"\nimport style0 from \"./restaurant.scss?vue&type=style&index=0&id=22f78726&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22f78726\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/restaurant/restaurant.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./restaurant.vue?vue&type=template&id=22f78726&scoped=true&\"","var components\ntry {\n  components = {\n    uAvatar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-avatar/u-avatar\" */ \"uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    uMask: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-mask/u-mask\" */ \"uview-ui/components/u-mask/u-mask.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.foodList.length\n  var g1 = !_vm.contentBottom ? _vm.cartList.length : null\n  var a0 = {\n    background: \"rgba(0, 0, 0, 0.5)\",\n    height: _vm.cartMaskHeight * 1.1 + \"px\",\n  }\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.maskShow = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.maskShow = false\n    }\n    _vm.e2 = function ($event) {\n      _vm.cartMaskShow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        a0: a0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./restaurant.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./restaurant.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<MainHeader title=\"恋爱餐厅\"></MainHeader>\r\n\r\n\t\t<!-- 正文内容 -->\r\n\t\t<view class=\"content\">\r\n\r\n\t\t\t<!-- header -->\r\n\t\t\t<view class=\"content-top\">\r\n\t\t\t\t<view v-if=\"!isLove\"\r\n\t\t\t\t\tstyle=\"font-size: 37rpx; color: #fff; width: 100%; text-align: center; margin-top: 100rpx;\">\r\n\t\t\t\t\t请先寻找您爱的另一半</view>\r\n\r\n\t\t\t\t<view class=\"content-top-main\" v-if=\"isLove\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t<u-avatar :src=\"user.userAvatar\" size=\"large\"></u-avatar>\r\n\t\t\t\t\t\t<view>{{user.userNickName}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"left-identity\" v-if=\"isRestaurant\">{{leftIdentity}}</view>\r\n\r\n\t\t\t\t\t<view class=\"middle\" @click=\"gotoEditNamePage()\">\r\n\t\t\t\t\t\t{{restaurant.restaurantName}}\r\n\t\t\t\t\t\t<image src=\"../../static/img/pen.png\"></image>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"middle-lv\">\r\n\t\t\t\t\t\t<image :src=' \"../../static/img/LV/LV\" +  restaurant.restaurantGrade + \".png\" '></image>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t<u-avatar :src=\"user.lover.userAvatar\" size=\"large\"></u-avatar>\r\n\t\t\t\t\t\t<view>{{user.lover.userNickName}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"right-identity\" v-if=\"isRestaurant\">{{rightIdentity}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- main -->\r\n\t\t\t<view class=\"content-main\" :style=\"'height:'+clientHeight+'px;'\">\r\n\r\n\t\t\t\t<scroll-view class='left-scroll' scroll-y style=\"height: 100%\">\r\n\r\n\t\t\t\t\t<view class=\"food-category\" v-for=\"(item,index) in foodCategoryList\"\r\n\t\t\t\t\t\t@click=\"foodCategoryClick(index)\">\r\n\t\t\t\t\t\t<view :class=\"item.foodCategoryIsCheck == true ? 'food-category-left-1' : 'food-category-left'\">\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t:class=\"item.foodCategoryIsCheck == true ? 'food-category-right-1' : 'food-category-right'\">\r\n\t\t\t\t\t\t\t{{item.foodCategoryName}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</scroll-view>\r\n\r\n\t\t\t\t<scroll-view class='right-scroll' scroll-y style=\"height: 100%\">\r\n\t\t\t\t\t<view class=\"right-scroll-top\">\r\n\t\t\t\t\t\t—<font>{{rightScrollTopTitle}}</font>—\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view style=\"width: 100%; height: 122rpx;\"></view>\r\n\r\n\t\t\t\t\t<view v-for=\"(item,index) in foodList\">\r\n\t\t\t\t\t\t<view class=\"right-scroll-main\">\r\n\t\t\t\t\t\t\t<view class=\"right-scroll-main-item\">\r\n\t\t\t\t\t\t\t\t<view class=\"right-scroll-main-img\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"item.foodImg\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view class=\"right-scroll-main-r\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"right-scroll-main-name\">\r\n\t\t\t\t\t\t\t\t\t\t{{item.foodName}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"right-scroll-main-count\">\r\n\t\t\t\t\t\t\t\t\t\t已售{{item.foodSellCount}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"right-scroll-main-bottom\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"right-scroll-main-bottom-left\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image src=\"../../static/img/heart.png\"></image>\r\n\t\t\t\t\t\t\t\t\t\t\t<view>{{item.foodHeartCount}}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"right-scroll-main-bottom-right\" v-if=\"!contentBottom\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"minus\" @click=\"foodCountMinus(index)\">-</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"num\">{{item.cartCount}}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- <view class=\"num\">{{getcartFoodCount(index)}}</view> -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"add\" @click=\"foodCountAdd(index)\">+</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"line\" v-if=\"index == foodList.length - 1 ? false : true\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- footer -->\r\n\t\t\t<view class=\"content-bottom\">\r\n\r\n\t\t\t\t<!-- 老板页面 -->\r\n\t\t\t\t<view class=\"content-bottom-boss\" v-if=\"contentBottom\">\r\n\t\t\t\t\t<!-- <view class=\"content-bottom-boss\" v-if=\"false\"> -->\r\n\t\t\t\t\t<view class=\"btn btn_category\" @click=\"foodCategoryManage()\">\r\n\t\t\t\t\t\t类别管理\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"btn btn_addfood\" @click=\"addFood()\">\r\n\t\t\t\t\t\t添加食品\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 顾客页面 -->\r\n\t\t\t\t<view class=\"content-bottom-customer\" v-if=\"!contentBottom\">\r\n\t\t\t\t\t<!-- <view class=\"content-bottom-customer\" v-if=\"true\"> -->\r\n\t\t\t\t\t<view class=\"cart\" @click=\"cartClick()\">\r\n\t\t\t\t\t\t<image src=\"../../static/img/cart.png\"></image>\r\n\t\t\t\t\t\t<view class=\"cart-num\">{{cartList.length}}</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"count\">\r\n\t\t\t\t\t\t<view>总计：</view>\r\n\t\t\t\t\t\t<image src=\"../../static/img/heart.png\"></image>\r\n\t\t\t\t\t\t<font>{{cartFoodHeartCount}}</font>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"btn btn_addfood\" @click=\"gotoOrder()\">\r\n\t\t\t\t\t\t去结算\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t\t<!-- 未开店 遮罩层 -->\r\n\t\t<u-mask :show=\"maskShow\" @click=\"maskShow = false\">\r\n\t\t\t<view class=\"warp\">\r\n\t\t\t\t<view class=\"rect\" @tap.stop>\r\n\t\t\t\t\t<view class=\"thead\">\r\n\t\t\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t\t\t请选择您的的角色\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<image @click=\"maskShow = false\" src=\"../../static/img/close.png\" class=\"close\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t\t<p>创建店铺前，请先选择您的角色</p>\r\n\t\t\t\t\t\t<view class=\"midd\">\r\n\t\t\t\t\t\t\t<p>玩法说明：</p>\r\n\t\t\t\t\t\t\t<p>老板可以进行店铺类别及商品管理</p>\r\n\t\t\t\t\t\t\t<p>顾客可以对老板的店铺商品进行购买</p>\r\n\t\t\t\t\t\t\t<p>每人初始50爱心，用于消费，后期可赚取</p>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<p>当您的角色选定后，您的另一半将自动成为另一个角色</p>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"check\">\r\n\t\t\t\t\t\t<view>我要当老板，打理店铺</view>\r\n\t\t\t\t\t\t<image @click=\"maskCheckBoss()\" :src='maskCheckBossUrl'></image>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"check\">\r\n\t\t\t\t\t\t<view>我要当顾客，买买买买</view>\r\n\t\t\t\t\t\t<image @click=\"maskCheckCustomer()\" :src='maskCheckCustomerUrl'></image>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"submit\" @click=\"maskSubmit()\">\r\n\t\t\t\t\t\t确定\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-mask>\r\n\r\n\t\t<u-mask :show=\"cartMaskShow\" @click=\"cartMaskShow = false\"\r\n\t\t\t:custom-style=\"{background: 'rgba(0, 0, 0, 0.5)', height: cartMaskHeight * 1.1 + 'px'}\">\r\n\t\t\t<view class=\"cart_warp\">\r\n\t\t\t\t<view class=\"cart_rect\" @tap.stop>\r\n\t\t\t\t\t<view class=\"cart-top\">\r\n\t\t\t\t\t\t<view :class=\"cartTopSelectAllClass\" @click=\"cartTopSelectAll()\"></view>\r\n\t\t\t\t\t\t<view class=\"all\">全选</view>\r\n\t\t\t\t\t\t<!-- <view class=\"text\">删除</view> -->\r\n\t\t\t\t\t\t<view class=\"text\" @click=\"clearAllCart()\">清空购物车</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<scroll-view class='cart-scroll' scroll-y style=\"height: 500rpx\">\r\n\t\t\t\t\t\t<view class=\"cart-scroll-item\" v-for=\"(item,index) in cartList\">\r\n\t\t\t\t\t\t\t<view :class=\"item.cartIsCheck == 0 ? 'btn' : ' btn checked' \"\r\n\t\t\t\t\t\t\t\t@click=\"cartItemClick(index)\"></view>\r\n\r\n\t\t\t\t\t\t\t<image :src=\"item.food.foodImg\"></image>\r\n\r\n\t\t\t\t\t\t\t<view class=\"item-mid\">\r\n\t\t\t\t\t\t\t\t<view class=\"item-mid-name\">{{item.food.foodName}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item-mid-sell\">已售{{item.food.foodSellCount}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item-mid-heart\">\r\n\t\t\t\t\t\t\t\t\t<image src=\"../../static/img/heart.png\"></image>\r\n\t\t\t\t\t\t\t\t\t<view>{{item.food.foodHeartCount}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<view class=\"right-btn\">\r\n\t\t\t\t\t\t\t\t<view class=\"minus\" @click=\"foodCartCountMinus(index)\">-</view>\r\n\t\t\t\t\t\t\t\t<view class=\"num\">{{item.cartFoodCount}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"add\" @click=\"foodCartCountAdd(index)\">+</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</scroll-view>\r\n\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-mask>\r\n\r\n\t\t<MyTabBar></MyTabBar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport MainHeader from \"../../components/main_header.vue\"\r\n\timport MyTabBar from \"../../components/my_tabBar.vue\"\r\n\timport common from \"../../utils/common\"\r\n\timport storage from \"../../utils/storage\"\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tMainHeader,\r\n\t\t\tMyTabBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 解决android和ios底部适配问题\r\n\t\t\t\tclientHeight: 0,\r\n\t\t\t\tisLove: true,\r\n\t\t\t\tisRestaurant: false,\r\n\t\t\t\trightIdentity: \"\",\r\n\t\t\t\tleftIdentity: \"\",\r\n\t\t\t\trightScrollTopTitle: \"\",\r\n\t\t\t\tmaskShow: false,\r\n\t\t\t\tmaskCheckBossUrl: \"../../static/img/res1.png\",\r\n\t\t\t\tmaskCheckCustomerUrl: \"../../static/img/res0.png\",\r\n\t\t\t\tcontentBottom: true,\r\n\t\t\t\tcartMaskShow: false,\r\n\t\t\t\tcartMaskHeight: 0,\r\n\t\t\t\tcartIsAllCheck: 0,\r\n\t\t\t\tcartFoodHeartCount: \"0\",\r\n\t\t\t\tcartTopSelectAllClass: \"btn checked\",\r\n\t\t\t\tfoodCategoryList: [{\r\n\t\t\t\t\t\tfoodCategoryId: 1,\r\n\t\t\t\t\t\tfoodCategoryName: \"默认分类\",\r\n\t\t\t\t\t\trestaurantId: 1,\r\n\t\t\t\t\t\tfoodCategoryIsCheck: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfoodCategoryId: 2,\r\n\t\t\t\t\t\tfoodCategoryName: \"好吃的菜\",\r\n\t\t\t\t\t\trestaurantId: 1,\r\n\t\t\t\t\t\tfoodCategoryIsCheck: false\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tfoodList: [],\r\n\t\t\t\trestaurant: {\r\n\t\t\t\t\trestaurantName: \"这是个神秘的小店\",\r\n\t\t\t\t\trestaurantGrade : 1\r\n\t\t\t\t},\r\n\t\t\t\tuser: {},\r\n\t\t\t\tcartList: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.init();\r\n\t\t\t//刷新数据之后停止刷新效果\r\n\t\t\tuni.stopPullDownRefresh()\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getClineHeight();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.init();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync init(){\r\n\t\t\t\tawait this.$http.httpGetByToken('/user/beforeLogin').then(res => {\r\n\t\t\t\t\tstorage.set(\"userinfo\", res.data.data);\r\n\t\t\t\t})\r\n\t\t\t\tthis.user = storage.get(\"userinfo\");\r\n\t\t\t\tlet b = this.checkIsLove();\r\n\t\t\t\tif (b) {\r\n\t\t\t\t\t// 已恋爱 再去检验是否开店\r\n\t\t\t\t\tawait this.checkIsRestaurant();\r\n\t\t\t\t\tlet restaurant = storage.get(\"restaurantInfo\");\r\n\t\t\t\t\tif (restaurant != null && restaurant != undefined && restaurant != \"\") {\r\n\t\t\t\t\t\tawait this.getfoodCategoryList();\r\n\t\t\t\t\t\tawait this.getAllFood();\r\n\t\t\t\t\t\t// 当前用户是老板\r\n\t\t\t\t\t\tif (restaurant.restaurantBossId == this.user.userId) {\r\n\t\t\t\t\t\t\tawait this.getCartList();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 当前用户是顾客\r\n\t\t\t\t\t\t\t// 获取购物车信息--->getfoodList();\r\n\t\t\t\t\t\t\tawait this.getCartList();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.setRightScrollTopTitle();\r\n\t\t\t},\r\n\t\t\tgetfoodList() {\r\n\t\t\t\tlet foodCategoryId;\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet restaurant = storage.get(\"restaurantInfo\");\r\n\t\t\t\tif (this.foodList.length == 0) {\r\n\t\t\t\t\tfor (let i = 0; i < this.foodCategoryList.length; i++) {\r\n\t\t\t\t\t\tif (this.foodCategoryList[i].foodCategoryIsCheck == true) {\r\n\t\t\t\t\t\t\tfoodCategoryId = this.foodCategoryList[i].foodCategoryId\r\n\t\t\t\t\t\t\tlet allFoodInfo = storage.get(\"allFoodInfo\")\r\n\r\n\t\t\t\t\t\t\tfor (let i = 0; i < allFoodInfo.length; i++) {\r\n\t\t\t\t\t\t\t\tif (allFoodInfo[i].foodCategoryId == foodCategoryId) {\r\n\t\t\t\t\t\t\t\t\tthat.foodList.push(allFoodInfo[i]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getfoodCategoryList() {\r\n\t\t\t\tlet restaurant = storage.get(\"restaurantInfo\");\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tawait this.$http.httpGetByToken(\"/foodCategory/getFoodCategoryByRestaurantId/\" + restaurant.restaurantId).then(\r\n\t\t\t\t\tres => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif (res.data.data != null && res.data.data != undefined && res.data.data != \"\" && res.data.data\r\n\t\t\t\t\t\t\t.length != 0) {\r\n\t\t\t\t\t\t\tthat.foodCategoryList = res.data.data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync getAllFood() {\r\n\t\t\t\tlet restaurant = storage.get(\"restaurantInfo\");\r\n\t\t\t\tawait this.$http.httpGetByToken(\"/food/getFoodInfoByRestaurantId/\" + restaurant.restaurantId).then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tstorage.set(\"allFoodInfo\", res.data.data);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync getCartList() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tawait this.$http.httpGetByToken(\"/cart/getCartInfoByUserId\").then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthat.cartList = res.data.data\r\n\t\t\t\t\tthat.cartFoodHeartCount = res.data.msg\r\n\r\n\t\t\t\t\tthat.getfoodList()\r\n\t\t\t\t\tthat.checkCartIsALLSelect()\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// getcartFoodCount(index) {\r\n\t\t\t// \tif (this.cartList.length == 0) {\r\n\t\t\t// \t\treturn 0;\r\n\t\t\t// \t} else {\r\n\t\t\t// \t\tfor (let i = 0; i < this.cartList.length; i++) {\r\n\t\t\t// \t\t\tif (this.foodList[ixdex].foodId == this.cartList[i].cartFoodId) {\r\n\t\t\t// \t\t\t\treturn this.cartList[i].cartFoodCount;\r\n\t\t\t// \t\t\t} else {\r\n\t\t\t// \t\t\t\treturn 0;\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\r\n\t\t\t// },\r\n\t\t\t// 校验购物车是否全选\r\n\t\t\tcheckCartIsALLSelect() {\r\n\t\t\t\tlet cartList = this.cartList\r\n\t\t\t\tlet flag = true;\r\n\t\t\t\tfor (let i = 0; i < cartList.length; i++) {\r\n\t\t\t\t\tif (cartList[i].cartIsCheck == 1) {\r\n\t\t\t\t\t\tflag = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (flag == true) {\r\n\t\t\t\t\tthis.cartTopSelectAllClass = \"btn checked\";\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cartTopSelectAllClass = \"btn\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 购物车全选\r\n\t\t\tcartTopSelectAll() {\r\n\t\t\t\tlet b = this.checkCartIsALLSelect();\r\n\t\t\t\tif (!b) {\r\n\t\t\t\t\tfor (let i = 0; i < this.cartList.length; i++) {\r\n\t\t\t\t\t\tif (this.cartList[i].cartIsCheck == 0) {\r\n\t\t\t\t\t\t\tthis.cartList[i].cartIsCheck = 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.checkCartIsALLSelect();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (b) {\r\n\t\t\t\t\tfor (let i = 0; i < this.cartList.length; i++) {\r\n\t\t\t\t\t\tif (this.cartList[i].cartIsCheck == 1) {\r\n\t\t\t\t\t\t\tthis.cartList[i].cartIsCheck = 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.checkCartIsALLSelect();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t// 清空购物车\r\n\t\t\tclearAllCart() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthis.$http.httpPostByToken(\"/cart/deleteCart\").then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthat.init();\r\n\t\t\t\t\tfor (let i = 0; i < that.foodList.length; i++) {\r\n\t\t\t\t\t\tthat.foodList[i].cartCount = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.cartMaskShow = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 购物车商品选择\r\n\t\t\tcartItemClick(index) {\r\n\t\t\t\tif (this.cartList[index].cartIsCheck == 1) {\r\n\t\t\t\t\tthis.cartList[index].cartIsCheck = 0\r\n\t\t\t\t\tlet b = this.checkCartIsALLSelect();\r\n\t\t\t\t\tconsole.log(b)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.cartList[index].cartIsCheck == 0) {\r\n\t\t\t\t\tthis.cartList[index].cartIsCheck = 1\r\n\t\t\t\t\tthis.checkCartIsALLSelect();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 购物袋单击\r\n\t\t\tcartClick() {\r\n\t\t\t\tif (this.cartList.length != 0) {\r\n\t\t\t\t\tthis.cartMaskShow = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 校验当前用户是否恋爱\r\n\t\t\tcheckIsLove() {\r\n\t\t\t\tif (this.user.userIsLove == 0) {\r\n\t\t\t\t\tthis.isLove = false;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isLove = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 校验当前用户是否开店\r\n\t\t\tasync checkIsRestaurant() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tawait this.$http.httpGetByToken(\"/restaurant/checkUserIsCreateRestaurant\").then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif (res.data.flag == true) {\r\n\t\t\t\t\t\tstorage.set(\"restaurantInfo\", res.data.data)\r\n\t\t\t\t\t\tthat.restaurant = storage.get(\"restaurantInfo\");\r\n\t\t\t\t\t\tif (that.restaurant.restaurantBossId == that.user.userId) {\r\n\t\t\t\t\t\t\tthat.leftIdentity = \"老板\"\r\n\t\t\t\t\t\t\tthat.rightIdentity = \"顾客\"\r\n\t\t\t\t\t\t\tthat.contentBottom = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.leftIdentity = \"顾客\"\r\n\t\t\t\t\t\t\tthat.rightIdentity = \"老板\"\r\n\t\t\t\t\t\t\tthat.contentBottom = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.isRestaurant = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.maskShow = true\r\n\t\t\t\t\t\tthat.isRestaurant = false\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgotoOrder() {\r\n\t\t\t\tif (this.cartList.length == 0) {\r\n\t\t\t\t\tthis.$u.toast(`购物车为空`);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tstorage.set(\"cartList\", this.cartList);\r\n\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"../restaurant_order/restaurant_order\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 食物-按钮\r\n\t\t\tfoodCountMinus(index) {\r\n\t\t\t\tif (this.foodList[index].cartCount != 0) {\r\n\t\t\t\t\tlet foodId = this.foodList[index].foodId\r\n\t\t\t\t\tlet that = this;\r\n\t\t\t\t\tthis.$http.httpPostByToken(\"/cart/cartMinus/\" + foodId).then(res => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tthat.init();\r\n\t\t\t\t\t\tthis.foodList[index].cartCount -= 1;\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 食物+按钮\r\n\t\t\tfoodCountAdd(index) {\r\n\t\t\t\tlet foodId = this.foodList[index].foodId\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthis.$http.httpPostByToken(\"/cart/cartAdd/\" + foodId).then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthat.init();\r\n\t\t\t\t\tthis.foodList[index].cartCount += 1;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 购物车食物-按钮\r\n\t\t\tfoodCartCountMinus(index) {\r\n\t\t\t\tlet foodId = this.cartList[index].cartFoodId\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthis.$http.httpPostByToken(\"/cart/cartMinus/\" + foodId).then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthat.init();\r\n\t\t\t\t\tfor (let i = 0; i < that.foodList.length; i++) {\r\n\t\t\t\t\t\tif (that.foodList[i].foodId == foodId) {\r\n\t\t\t\t\t\t\tthat.foodList[i].cartCount -= 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 购物车食物+按钮\r\n\t\t\tfoodCartCountAdd(index) {\r\n\t\t\t\tlet foodId = this.cartList[index].cartFoodId\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthis.$http.httpPostByToken(\"/cart/cartAdd/\" + foodId).then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthat.init();\r\n\t\t\t\t\tfor (let i = 0; i < that.foodList.length; i++) {\r\n\t\t\t\t\t\tif (that.foodList[i].foodId == foodId) {\r\n\t\t\t\t\t\t\tthat.foodList[i].cartCount += 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 遮罩层选择老板\r\n\t\t\tmaskCheckBoss() {\r\n\t\t\t\tthis.maskCheckBossUrl = \"../../static/img/res1.png\"\r\n\t\t\t\tthis.maskCheckCustomerUrl = \"../../static/img/res0.png\"\r\n\t\t\t},\r\n\t\t\t// 遮罩层选择顾客\r\n\t\t\tmaskCheckCustomer() {\r\n\t\t\t\tthis.maskCheckBossUrl = \"../../static/img/res0.png\"\r\n\t\t\t\tthis.maskCheckCustomerUrl = \"../../static/img/res1.png\"\r\n\t\t\t},\r\n\t\t\t// 遮罩层确定\r\n\t\t\tmaskSubmit() {\r\n\t\t\t\tlet restaurant = {};\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (this.maskCheckBossUrl == \"../../static/img/res1.png\") {\r\n\t\t\t\t\trestaurant.restaurantBossId = this.user.userId;\r\n\t\t\t\t\trestaurant.restaurantCustomerId = this.user.lover.userId;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trestaurant.restaurantBossId = this.user.lover.userId;;\r\n\t\t\t\t\trestaurant.restaurantCustomerId = this.user.userId\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(restaurant);\r\n\t\t\t\tthis.$http.httpPostByToken(\"/restaurant/createRestaurant\", restaurant).then(res => {\r\n\t\t\t\t\tif (res.data.flag == true) {\r\n\t\t\t\t\t\tthat.init();\r\n\t\t\t\t\t\tthat.maskShow = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '创建失败，稍后再试'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t// 获取右部分类标题\r\n\t\t\tsetRightScrollTopTitle() {\r\n\t\t\t\tfor (let i = 0; i < this.foodCategoryList.length; i++) {\r\n\t\t\t\t\tif (this.foodCategoryList[i].foodCategoryIsCheck == true) {\r\n\t\t\t\t\t\tthis.rightScrollTopTitle = this.foodCategoryList[i].foodCategoryName;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 食物类别单击事件\r\n\t\t\tfoodCategoryClick(index) {\r\n\t\t\t\tfor (let i = 0; i < this.foodCategoryList.length; i++) {\r\n\t\t\t\t\tif (this.foodCategoryList[i].foodCategoryIsCheck == true) {\r\n\t\t\t\t\t\tthis.foodCategoryList[i].foodCategoryIsCheck = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.foodCategoryList[index].foodCategoryIsCheck = true;\r\n\t\t\t\t\tthis.setRightScrollTopTitle();\r\n\r\n\t\t\t\t\tif (this.foodList.length != 0) {\r\n\t\t\t\t\t\tthis.foodList.length = 0;\r\n\r\n\t\t\t\t\t\tthis.getfoodList();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 跳转修改名字页面\r\n\t\t\tgotoEditNamePage() {\r\n\t\t\t\tlet restaurant = storage.get(\"restaurantInfo\");\r\n\t\t\t\tif (restaurant == null || restaurant == undefined || restaurant == \"\") {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '还未开店'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"../restaurant_editRestaurantName/restaurant_editRestaurantName\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 类别管理按钮\r\n\t\t\tfoodCategoryManage() {\r\n\t\t\t\tlet b = this.checkIsLove();\r\n\t\t\t\tif (!b) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '还没有伴侣'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet restaurant = storage.get(\"restaurantInfo\");\r\n\t\t\t\tif (restaurant == null || restaurant == undefined || restaurant == \"\") {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '还未开店'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"../restaurant_foodCategoryManage/restaurant_foodCategoryManage\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 添加食品\r\n\t\t\taddFood() {\r\n\t\t\t\tlet b = this.checkIsLove();\r\n\t\t\t\tif (!b) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '还没有伴侣'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet restaurant = storage.get(\"restaurantInfo\");\r\n\t\t\t\tif (restaurant == null || restaurant == undefined || restaurant == \"\") {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '还未开店'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"../restaurant_addFood/restaurant_addFood\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 解决android和ios底部适配问题\r\n\t\t\tgetBarHeight() {\r\n\t\t\t\tconst res = uni.getSystemInfoSync()\r\n\t\t\t\tif (res.platform === 'ios') {\r\n\t\t\t\t\treturn 44 + res.statusBarHeight + 50 + 34\r\n\t\t\t\t} else if (res.platform === 'android') {\r\n\t\t\t\t\treturn 48 + res.statusBarHeight + 50\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 49 + res.statusBarHeight\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetcartMaskHeight() {\r\n\t\t\t\tconst res = uni.getSystemInfoSync()\r\n\t\t\t\tif (res.platform === 'ios') {\r\n\t\t\t\t\treturn 44 + res.statusBarHeight + 50 + 5\r\n\t\t\t\t} else if (res.platform === 'android') {\r\n\t\t\t\t\treturn 48 + res.statusBarHeight + 50\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 63\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取可视区域高度\r\n\t\t\tgetClineHeight() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconst res = uni.getSystemInfo({\r\n\t\t\t\t\tsuccess: (res => {\r\n\t\t\t\t\t\tthat.clientHeight = res.windowHeight - common.rpxTopx(380) - that.getBarHeight();\r\n\t\t\t\t\t\tthat.cartMaskHeight = res.windowHeight - common.rpxTopx(120) - that\r\n\t\t\t\t\t\t\t.getcartMaskHeight()\r\n\t\t\t\t\t\tconsole.log()\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped src=\"./restaurant.scss\"></style>"],"sourceRoot":""}